<!doctype html>
<html>
<head>
<meta charset="utf-8">
<link rel="stylesheet" href="layui/css/layui.css"  media="all">
<link rel="stylesheet" href="css/style.css">
<title>账号-会员管理</title>
</head>

<body class="layui-layout-body">
<div class="layui-layout layui-layout-admin">
    <div class="layui-header">
        <div class="layui-logo">
            <img src="images/logo.png" alt="" class="img"/>
        </div>
        <div class="head_right clearfix">
            <div class="top_notice fl">
                <span class="fz">会员管理</span>
                <div class="txt">
                    <li>账号管理可以批量修改，操作，管理账号</li>
                </div>
            </div>
            <!--<div class="top_wz fl">
                <em class="c_blue">567</em>（总使用）/ <em class="c_blue">2000</em>（总端口数）
            </div>-->
            <div class="fr">
                <a href="#" class="r_fz c_blue">查看登陆日志</a>
                <span class="r_fz">xdqy</span>
                <a href="#" class="r_fz c_blue">修改密码</a>
                <span class="quit quits">退出</span>
            </div>
        </div>
        
    </div> 
    <div class="layui-side left_menu_side">
        <div class="layui-side-scroll">
            <ul class="left_menu">
                <li class="item index">
                    <a href="#">首页</a>
                </li>
                <li class="item account haschild cur">
                    <a href="#">账号</a>
                    <div class="drop">
                        <a href="账号-会员管理.html" class="this">会员管理</a>
                        <a href="账号-账号管理.html">账号管理</a>
                        <a href="账号-账号设置.html">账号设置</a>
                    </div>
                </li>
                <li class="item friend haschild">
                    <a href="#">好友</a>
                    <div class="drop">
                        <a href="好友管理.html">好友管理</a>
                        <a href="好友-加粉任务.html">加粉任务</a>
                        <a href="好友分析.html">好友分析</a>
                    </div>
                </li>
                <li class="item group haschild">
                    <a href="#">群</a>
                    <div class="drop">
                        <a href="#">批量拉群</a>
                        <a href="#">自动群聊</a>
                    </div>
                </li>
                <li class="item function haschild">
                    <a href="#">功能</a>
                    <div class="drop">
                        <a href="功能-群发消息.html">群发消息</a>
                        <a href="功能-发朋友圈.html">群发朋友圈</a>
                        <a href="功能-朋友圈评论.html">朋友圈评论</a>
                        <a href="功能-素材管理.html">素材管理</a>
                    </div>
                </li>
                <li class="item customer haschild">
                    <a href="#">客服系统</a>
                    <div class="drop">
                        <a href="客服-客服管理.html">客服管理</a>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <div class="layui-body">
        <div class="">
            <div class="zh_total">
                <img src="images/icon_31.png" alt="" class="icon"/>
                <div class="info">
                    <p class="fz">总数</p>
                    <p class="num">18734</p>
                </div>
                <span class="share fr">分享</span>
            </div>
            <h6 class="firend_tit">会员列表</h6>
            <div class="friend_bar clearfix layui-form">
                <div class="searchbox fl">
                    <input type="text" class="ipt ipt_txt" placeholder="请输入会员名称"/>
                </div>
                <button class="button_ico add fr">添加会员</button>
            </div>
            <div class="friend_tablewrap">
                <table class="friend_table layui-form">
                    <thead>
                        <th width="7%">
                            <input type="checkbox" name="" lay-skin="primary" lay-filter="allChoose">&nbsp;&nbsp;全选
                        </th>
                        <th width="10%">分组名称</th>
                        <th width="10%">密码</th>
                        <th width="15%">注册时间</th>
                        <th width="15%">指定客服</th>
                        <th width="23%">已绑定账号（在线/总）</th>
                        <th width="20%">操作</th>
                    </thead>
                    <tbody>
                        <!-- <tr>
                            <td>
                                <input type="checkbox" name="" lay-skin="primary" lay-filter="itemChoose">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            </td>
                            <td>A1037937287</td>
                            <td>1234567</td>
                            <td>2019-07-15 15:31:26</td>
                            <td>
                                <div class="select_wrap">
                                    <select name="" id="">
                                        <option value="1">请选择</option>
                                        <option value="2">请选择</option>
                                        <option value="3">请选择</option>
                                    </select>
                                </div>
                            </td>
                            <td>
                                88/144 <span class="online_btn">一键上线</span>
                            </td>
                            <td>
                                <a href="javascript:;" class="lk_ico editname">修改名称</a>
                                <a href="javascript:;" class="lk_ico quit quitdel">注销</a>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <input type="checkbox" name="" lay-skin="primary" lay-filter="itemChoose">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            </td>
                            <td>A1037937287</td>
                            <td>1234567</td>
                            <td>2019-07-15 15:31:26</td>
                            <td>
                                <div class="select_wrap">
                                    <select name="" id="">
                                        <option value="1">请选择</option>
                                        <option value="2">请选择</option>
                                        <option value="3">请选择</option>
                                    </select>
                                </div>
                            </td>
                            <td>
                                88/144 <span class="online_btn">一键上线</span>
                            </td>
                            <td>
                                <a href="javascript:;" class="lk_ico editname">修改名称</a>
                                <a href="javascript:;" class="lk_ico quit quitdel">注销</a>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <input type="checkbox" name="" lay-skin="primary" lay-filter="itemChoose">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            </td>
                            <td>A1037937287</td>
                            <td>1234567</td>
                            <td>2019-07-15 15:31:26</td>
                            <td>
                                <div class="select_wrap">
                                    <select name="" id="">
                                        <option value="1">请选择</option>
                                        <option value="2">请选择</option>
                                        <option value="3">请选择</option>
                                    </select>
                                </div>
                            </td>
                            <td>
                                88/144 <span class="online_btn">一键上线</span>
                            </td>
                            <td>
                                <a href="javascript:;" class="lk_ico editname">修改名称</a>
                                <a href="javascript:;" class="lk_ico quit">注销</a>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <input type="checkbox" name="" lay-skin="primary" lay-filter="itemChoose">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            </td>
                            <td>A1037937287</td>
                            <td>1234567</td>
                            <td>2019-07-15 15:31:26</td>
                            <td>
                                <div class="select_wrap">
                                    <select name="" id="">
                                        <option value="1">请选择</option>
                                        <option value="2">请选择</option>
                                        <option value="3">请选择</option>
                                    </select>
                                </div>
                            </td>
                            <td>
                                88/144 <span class="online_btn">一键上线</span>
                            </td>
                            <td>
                                <a href="javascript:;" class="lk_ico editname">修改名称</a>
                                <a href="javascript:;" class="lk_ico quit">注销</a>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <input type="checkbox" name="" lay-skin="primary" lay-filter="itemChoose">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            </td>
                            <td>A1037937287</td>
                            <td>1234567</td>
                            <td>2019-07-15 15:31:26</td>
                            <td>
                                <div class="select_wrap">
                                    <select name="" id="">
                                        <option value="1">请选择</option>
                                        <option value="2">请选择</option>
                                        <option value="3">请选择</option>
                                    </select>
                                </div>
                            </td>
                            <td>
                                88/144 <span class="online_btn">一键上线</span>
                            </td>
                            <td>
                                <a href="javascript:;" class="lk_ico editname">修改名称</a>
                                <a href="javascript:;" class="lk_ico quit">注销</a>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <input type="checkbox" name="" lay-skin="primary" lay-filter="itemChoose">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            </td>
                            <td>A1037937287</td>
                            <td>1234567</td>
                            <td>2019-07-15 15:31:26</td>
                            <td>
                                <div class="select_wrap">
                                    <select name="" id="">
                                        <option value="1">请选择</option>
                                        <option value="2">请选择</option>
                                        <option value="3">请选择</option>
                                    </select>
                                </div>
                            </td>
                            <td>
                                88/144 <span class="online_btn">一键上线</span>
                            </td>
                            <td>
                                <a href="javascript:;" class="lk_ico editname">修改名称</a>
                                <a href="javascript:;" class="lk_ico quit">注销</a>
                            </td>
                        </tr> -->
                    </tbody>
                </table>
                <div class="pagelist_wrap">
                    <span class="fz">共144条记录，每页显示</span>
                    <select name="" id="" class="num_box">
                        <option value="">10</option>
                        <option value="">20</option>
                        <option value="">30</option>
                        <option value="">40</option>
                    </select>
                    <div class="pagelist" id="Page">

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--添加会员-->
<div class="pop_bg"></div>
<div class="pop pop_zh pop_hy_addtag pop_hy_addtag1">
    <em class="close">&times;</em>
    <div class="t_tit">新建会员名称</div>
    <div class="detail layui-form">
        <div class="box box1">
            <li>
               <input type="text" class="ipt ipt_txt" placeholder="请输入会员名"/>
            </li>
        </div>
        <div class="box box2">
            <li>
               <input type="text" class="ipt ipt_txt" placeholder="请输入密码"/>
            </li>
        </div>
        <div class="btns clearfix">
            <button class="button this fl queding1">确定</button>
            <button class="button fr cancel">取消</button>
        </div>
    </div>
</div>

<!--修改会员名称-->
<div class="pop pop_zh pop_hy_addtag pop_hy_addtag2">
    <em class="close">&times;</em>
    <div class="t_tit">修改会员名称</div>
    <div class="detail layui-form">
        <div class="box box3">
            <li>
               <input type="text" class="ipt ipt_txt" placeholder="请输入会员名"/>
            </li>
        </div>
        <div class="box box4">
            <li>
               <input type="text" class="ipt ipt_txt" placeholder="请输入密码"/>
            </li>
        </div>
        <div class="btns clearfix">
            <button class="button this fl queding1">确定</button>
            <button class="button fr cancel">取消</button>
        </div>
    </div>
</div>



<script src="js/jquery-1.8.3.min.js"></script>
<script src="layui/layui.js" charset="utf-8"></script>
<script src="js/common.js" charset="utf-8"></script>
<script src="js/loginout.js"></script>
<script>
layui.use(['form', 'upload', 'laydate'], function(){
var form = layui.form
,layer = layui.layer
,layedit = layui.layedit
,laydate = layui.laydate
,upload = layui.upload;


form.on('checkbox(allChoose)', function(data){
    var child = $(data.elem).parents('table').find('tbody input[type="checkbox"]');
    child.each(function(index, item){
        item.checked = data.elem.checked;
    });
    form.render('checkbox');
});
form.on('checkbox(itemChoose)',function(data){
    var sib = $(data.elem).parents('table').find('tbody input[type="checkbox"]:checked').length;
    var total = $(data.elem).parents('table').find('tbody input[type="checkbox"]').length;
    if(sib == total){
        $(data.elem).parents('table').find('thead input[type="checkbox"]').prop("checked",true);
        form.render();
    }else{
        $(data.elem).parents('table').find('thead input[type="checkbox"]').prop("checked",false);
        form.render();
    }
}); 

var lablegroup =JSON.parse(localStorage.getItem("lablegroup"))
token = localStorage.getItem("token")

                    var str = ""
                    for(var i in lablegroup){
                        str += `
                        <tr>
                            <td>
                                <input type="checkbox" name="" lay-skin="primary" lay-filter="itemChoose">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            </td>
                            <td>${lablegroup[i]}</td>
                            <td>1234567</td>
                            <td>2019-07-15 15:31:26</td>
                            <td>
                                <div class="select_wrap">
                                    <select name="" id="">
                                        <option value="1">请选择</option>
                                        <option value="2">请选择</option>
                                        <option value="3">请选择</option>
                                    </select>
                                </div>
                            </td>
                            <td>
                                88/144 <span class="online_btn">一键上线</span>
                            </td>
                            <td>
                                <a href="javascript:;" class="lk_ico editname">修改名称</a>
                                <a href="javascript:;" class="lk_ico quit quitdel" data-lable=${lablegroup[i]}>注销</a>
                            </td>
                        </tr>
                        `

                    }
                    $("tbody").append(str)
                    form.render();

//点击注销按钮
$("body").delegate(".quitdel","click",function(){
    console.log($(this).get(0).getAttribute("data-lable"))
    var lable = $(this).get(0).getAttribute("data-lable")
    var data =
        '{"type":' +
        '"del_lable_account",' +
        '"lable":' +
        '"'+lable+'",' +
        '"ticket":' +
        '"'+token+'"' +
        '}'
        //console.log(data)
        $.ajax({
            type: 'post',
            url: 'http://192.168.10.177/api.esp',
            data:data,
            dataType: 'json',
            success:function(msg){
                //console.log(msg)
                if(msg.err_code == 0){
                    layer.msg("删除成功")
                }else{
                    layer.msg("删除失败")
                }
            },
            error:function(err){
                console.log(err)
            }
        })
})





$('.add').click(function(){
    $('.pop_hy_addtag1').show();
    $('.pop_bg').show();
});  


//修改会员名称
$("body").delegate(".editname","click",function(){
    $('.pop_hy_addtag2').show();
    $('.pop_bg').show();
})

  
});

</script>
<script type="text/javascript" src="js/mypage.js"></script>
<script type="text/javascript">
    P.initMathod({
        params: {elemId: '#Page',total:'123'},
        requestFunction: function () {
           // P.config.total = parseInt(Math.random() * 10 + 85);//此处模拟总记录变化

            //TODO ajax异步请求过程,异步获取到的数据总条数赋值给 P.config.total
            
            //列表渲染自行处理
            
            console.log(JSON.stringify(P.config));
        }
    });
</script>
</body>
</html>
